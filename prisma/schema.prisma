generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["native", "debian-openssl-1.1.x", "windows"]
}

datasource db {
  provider = "mysql"
  url ="mysql://bpkadksb_2g18:}}s%n65M0vGvSwvZ@localhost/bpkadksb_arsip"
}

model User {
  id     String  @id @default(uuid()) @map("id")
  name   String  @map("name")
  email  String  @unique @map("email")
  pass   String  @map("pass")
  nip    String  @default("") @map("nip")
  level  Int     @default(1) @map("level")

  arsip  Arsip[]
  bidangSebagaiUser     Bidang[] @relation("UserBidang")
  bidangSebagaiPimpinan Bidang[] @relation("PimpinanBidang")

  @@map("User")
}

model Dinas {
  id String @id @default(uuid()) @map("id")
  nm String @map("nm")

  bidang Bidang[]

  @@map("Dinas")
}

model Bidang {
  id          String @id @default(uuid()) @map("id")
  nm          String @map("nm")

  idUser      String @map("idUser")
  user        User   @relation("UserBidang", fields: [idUser], references: [id])

  idPimpinan  String @default("") @map("idPimpinan")
  pimpinan    User   @relation("PimpinanBidang", fields: [idPimpinan], references: [id])

  jabatan String @default("") @map("jabatan")
  jab     String @default("") @map("jab")
  img     String @default("") @map("img")

  idDin  String @map("idDin")
  dinas  Dinas  @relation(fields: [idDin], references: [id])

  arsip Arsip[] @relation("BidangArsip")

  @@map("Bidang")
}

model Arsip {
  id           String   @id @default(uuid()) @map("id")

  idUser       String   @map("idUser")
  user         User     @relation(fields: [idUser], references: [id])

  idBidang     String   @map("idBidang")
  bidang       Bidang   @relation("BidangArsip", fields: [idBidang], references: [id])

  kategori     String   @map("kategori")
  jenis        String   @map("jenis")
  rentang      String   @map("rentang")
  retensi      String   @map("retensi")
  keterangan   String   @map("keterangan")

  kd           String   @map("kd")
  uraian       String   @map("uraian")
  uraianPoint  String   @map("uraianPoint")
  uraianPointC String   @map("uraianPointC")

  tgl          String   @map("tgl")
  docStatus    String   @map("docStatus")
  docC         String   @map("docC")
  file         String   @db.LongText @map("file")

  status       String   @map("status")
  formAs       String   @default("") @map("formAs")
  formNm       String   @db.LongText @map("formNm")
  formVal      String   @db.LongText @map("formVal")

  created_by   String   @map("created_by")
  created_at   DateTime @default(now()) @map("created_at")
  deletedAt    DateTime? @map("deletedAt")

  @@map("Arsip")
}
